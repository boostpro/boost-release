<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Class template slot</title>
<link rel="stylesheet" href="../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../../signals2/reference.html#header.boost.signals2.slot_hpp" title="Header &lt;boost/signals2/slot.hpp&gt;">
<link rel="prev" href="signal_type.html" title="Class template signal_type">
<link rel="next" href="slot/arg.html" title="Class template arg">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="signal_type.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../signals2/reference.html#header.boost.signals2.slot_hpp"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="slot/arg.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="refentry" title="Class template slot">
<a name="boost.signals2.slot"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class template slot</span></h2>
<p>boost::signals2::slot &#8212; Pass slots as function arguments, and associate tracked objects with a slot.</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="emphasis"><em>// In header: &lt;<a class="link" href="../../signals2/reference.html#header.boost.signals2.slot_hpp" title="Header &lt;boost/signals2/slot.hpp&gt;">boost/signals2/slot.hpp</a>&gt;

</em></span><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Signature, <span class="emphasis"><em>  // Function type R (T1, T2, ..., TN)</em></span>
         <span class="bold"><strong>typename</strong></span> SlotFunction = <a class="link" href="../function.html" title="Class template function">boost::function</a>&lt;R (T1, T2, ..., TN)&gt; &gt; 
<span class="bold"><strong>class</strong></span> <a class="link" href="slot.html" title="Class template slot">slot</a> : <span class="bold"><strong>public</strong></span> <span class="type"><a class="link" href="slot_base.html" title="Class slot_base">boost::signals2::slot_base</a></span> {
<span class="bold"><strong>public</strong></span>:
  <span class="emphasis"><em>// types</em></span>
  <span class="bold"><strong>typedef</strong></span> R            <a name="boost.signals2.slot.result_type"></a>result_type;         
  <span class="bold"><strong>typedef</strong></span> T1           <a name="boost.signals2.slot.argument_type"></a>argument_type;         <span class="emphasis"><em>// Exists iff arity == 1</em></span>
  <span class="bold"><strong>typedef</strong></span> T1           <a name="boost.signals2.slot.first_argument_type"></a>first_argument_type;   <span class="emphasis"><em>// Exists iff arity == 2</em></span>
  <span class="bold"><strong>typedef</strong></span> T2           <a name="boost.signals2.slot.second_argument_type"></a>second_argument_type;  <span class="emphasis"><em>// Exists iff arity == 2</em></span>
  <span class="bold"><strong>typedef</strong></span> Signature    <a name="boost.signals2.slot.signature_type"></a>signature_type;      
  <span class="bold"><strong>typedef</strong></span> SlotFunction <a name="boost.signals2.slot.slot_function_type"></a>slot_function_type;  

  <span class="emphasis"><em>// static constants</em></span>
  <span class="bold"><strong>static</strong></span> <span class="bold"><strong>const</strong></span> <span class="type"><span class="bold"><strong>int</strong></span></span> arity = N;  <span class="emphasis"><em>// The number of arguments taken by the slot.</em></span>

  <span class="emphasis"><em>// member classes/structs/unions</em></span>
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>unsigned</strong></span> n&gt; 
  <span class="bold"><strong>class</strong></span> <a class="link" href="slot/arg.html" title="Class template arg">arg</a> {
  <span class="bold"><strong>public</strong></span>:
    <span class="emphasis"><em>// types</em></span>
    <span class="bold"><strong>typedef</strong></span> Tn <a class="link" href="slot/arg.html#boost.signals2.slot.arg.type">type</a>;  <span class="emphasis"><em>// The type of the <a class="link" href="slot.html" title="Class template slot">slot</a>'s (n+1)th argument</em></span>
  };

  <span class="emphasis"><em>// <a class="link" href="slot.html#boost.signals2.slotconstruct-copy-destruct">construct/copy/destruct</a></em></span>
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Slot&gt; <a class="link" href="slot.html#id645124-bb">slot</a>(<span class="bold"><strong>const</strong></span> Slot &amp;);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> OtherSignature, <span class="bold"><strong>typename</strong></span> OtherSlotFunction&gt; 
    <a class="link" href="slot.html#id645178-bb">slot</a>(<span class="bold"><strong>const</strong></span> slot&lt;OtherSignature, OtherSlotFunction&gt; &amp;);
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Func, <span class="bold"><strong>typename</strong></span> Arg1, <span class="bold"><strong>typename</strong></span> Arg2, ..., <span class="bold"><strong>typename</strong></span> ArgN&gt; 
    <a class="link" href="slot.html#id701560-bb">slot</a>(<span class="bold"><strong>const</strong></span> Func &amp;, <span class="bold"><strong>const</strong></span> Arg1 &amp;, <span class="bold"><strong>const</strong></span> Arg2 &amp;, ..., <span class="bold"><strong>const</strong></span> ArgN &amp;);

  <span class="emphasis"><em>// <a class="link" href="slot.html#id643369-bb">invocation</a></em></span>
  <span class="type">result_type</span> <a class="link" href="slot.html#id643377-bb"><span class="bold"><strong>operator</strong></span>()</a>(arg&lt;0&gt;::type, arg&lt;1&gt;::_type, ..., arg&lt;N-1&gt;::type);
  <span class="type">result_type</span> <a class="link" href="slot.html#id643406-bb"><span class="bold"><strong>operator</strong></span>()</a>(arg&lt;0&gt;::type, arg&lt;1&gt;::_type, ..., arg&lt;N-1&gt;::type) <span class="bold"><strong>const</strong></span>;

  <span class="emphasis"><em>// <a class="link" href="slot.html#id643485-bb">tracking</a></em></span>
  <span class="type">slot &amp;</span> <a class="link" href="slot.html#id643493-bb">track</a>(<span class="bold"><strong>const</strong></span> weak_ptr&lt;<span class="bold"><strong>void</strong></span>&gt; &amp;);
  <span class="type">slot &amp;</span> <a class="link" href="slot.html#id643508-bb">track</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="signal_base.html" title="Class signal_base">signals2::signal_base</a> &amp;);
  <span class="type">slot &amp;</span> <a class="link" href="slot.html#id662091-bb">track</a>(<span class="bold"><strong>const</strong></span> <a class="link" href="slot_base.html" title="Class slot_base">signals2::slot_base</a> &amp;);

  <span class="emphasis"><em>// <a class="link" href="slot.html#id668592-bb">slot function access</a></em></span>
  <span class="type">slot_function_type &amp;</span> <a class="link" href="slot.html#id668600-bb">slot_function</a>();
  <span class="type"><span class="bold"><strong>const</strong></span> slot_function_type &amp;</span> <a class="link" href="slot.html#id633921-bb">slot_function</a>() <span class="bold"><strong>const</strong></span>;
};</pre></div>
<div class="refsect1" title="Description">
<a name="id1753697"></a><h2>Description</h2>
<p>A slot consists of a polymorphic function wrapper (<a class="link" href="../function.html" title="Class template function">boost::function</a> by default)
            plus a container of <code class="computeroutput">weak_ptr</code>s which identify the slot's "tracked objects".  If any of the
            tracked objects expire, the slot will automatically disable itself.  That is, the slot's function
            call operator will throw an exception instead of forwarding the function call to the slot's
            polymorphic function wrapper.  Additionally, a slot will automatically lock all the tracked objects
            as <code class="computeroutput">shared_ptr</code> during invocation, to prevent any of them from expiring while
            the polymorphic function wrapper is being run.
          </p>
<p>
            The slot constructor will search for <a class="link" href="signal.html" title="Class template signal">signals2::signal</a> and
            <a class="link" href="trackable.html" title="Class trackable">signals2::trackable</a> inside incoming function objects and
            automatically track them.  It does so by applying a visitor
            to the incoming functors with <a class="link" href="../visit_each.html" title="Function template visit_each">boost::visit_each</a>.
          </p>
<div class="refsect2" title="slot public construct/copy/destruct">
<a name="id1753765"></a><h3>
<a name="boost.signals2.slotconstruct-copy-destruct"></a><code class="computeroutput">slot</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Slot&gt; <a name="id645124-bb"></a>slot(<span class="bold"><strong>const</strong></span> Slot &amp; target);</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Effects:</span></p></td>
<td>
<p>Initializes the <code class="computeroutput">SlotFunction</code> object in <code class="computeroutput">this</code>
            with <code class="computeroutput">target</code>, which may be any
            function object with which a
            <code class="computeroutput">SlotFunction</code> can be
            constructed.
            </p>
<p>In this special case where the template type parameter <code class="computeroutput">Slot</code> is
              a compatible <a class="link" href="signal.html" title="Class template signal">signals2::signal</a> type,
              the signal will automatically be added to the slot's tracked object list.
              Otherwise, the slot's tracked object list is initially empty.
            </p>
</td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> OtherSignature, <span class="bold"><strong>typename</strong></span> OtherSlotFunction&gt; 
  <a name="id645178-bb"></a>slot(<span class="bold"><strong>const</strong></span> slot&lt;OtherSignature, OtherSlotFunction&gt; &amp; other_slot);</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Effects:</span></p></td>
<td><p>Initializes <code class="computeroutput">this</code> with a copy of
            <code class="computeroutput">other_slot</code>'s <code class="computeroutput">OtherSlotFunction</code> object and tracked object list.
            </p></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Func, <span class="bold"><strong>typename</strong></span> Arg1, <span class="bold"><strong>typename</strong></span> Arg2, ..., <span class="bold"><strong>typename</strong></span> ArgN&gt; 
  <a name="id701560-bb"></a>slot(<span class="bold"><strong>const</strong></span> Func &amp; f, <span class="bold"><strong>const</strong></span> Arg1 &amp; a1, <span class="bold"><strong>const</strong></span> Arg2 &amp; a2, ..., <span class="bold"><strong>const</strong></span> ArgN &amp; aN);</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Effects:</span></p></td>
<td><p>Syntactic sugar for <code class="computeroutput">bind()</code> when the constructor is passed more than
              one argument.  As if:
            <code class="computeroutput">slot(boost::bind(f, a1, a2, ..., aN))</code>
            </p></td>
</tr></tbody>
</table></div>
</li>
</ol></div>
</div>
<div class="refsect2" title="slot invocation">
<a name="id1754037"></a><h3>
<a name="id643369-bb"></a><code class="computeroutput">slot</code> invocation</h3>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<pre class="literallayout"><a name="id643373-bb"></a><span class="type">result_type</span> <a name="id643377-bb"></a><span class="bold"><strong>operator</strong></span>()(arg&lt;0&gt;::type a1, arg&lt;1&gt;::_type a2, ..., 
                       arg&lt;N-1&gt;::type aN);
<span class="type">result_type</span> <a name="id643406-bb"></a><span class="bold"><strong>operator</strong></span>()(arg&lt;0&gt;::type a1, arg&lt;1&gt;::_type a2, ..., 
                       arg&lt;N-1&gt;::type aN) <span class="bold"><strong>const</strong></span>;</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">Effects:</span></p></td>
<td><p>Calls the slot's <code class="computeroutput">SlotFunction</code> object.
            </p></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>The result returned by the slot's <code class="computeroutput">SlotFunction</code> object.</p></td>
</tr>
<tr>
<td><p><span class="term">Throws:</span></p></td>
<td><p>Any exceptions thrown by the slot's <code class="computeroutput">SlotFunction</code> object.
            <a class="link" href="expired_slot.html" title="Class expired_slot">boost::signals2::expired_slot</a> if any object in the tracked object list
            has expired.</p></td>
</tr>
<tr>
<td><p><span class="term">Notes:</span></p></td>
<td><p>If you have already used <a class="link" href="slot_base.html#id624504-bb">lock</a> to insure the
            tracked objects are valid, it is slightly more efficient to use the
            <a class="link" href="slot.html#id668596-bb">slot_function</a>() method
            and call the slot's <code class="computeroutput">SlotFunction</code> directly.</p></td>
</tr>
</tbody>
</table></div>
</li></ol></div>
</div>
<div class="refsect2" title="slot tracking">
<a name="id1754190"></a><h3>
<a name="id643485-bb"></a><code class="computeroutput">slot</code> tracking</h3>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<pre class="literallayout"><a name="id643489-bb"></a><span class="type">slot &amp;</span> <a name="id643493-bb"></a>track(<span class="bold"><strong>const</strong></span> weak_ptr&lt;<span class="bold"><strong>void</strong></span>&gt; &amp; tracked_object);
<span class="type">slot &amp;</span> <a name="id643508-bb"></a>track(<span class="bold"><strong>const</strong></span> <a class="link" href="signal_base.html" title="Class signal_base">signals2::signal_base</a> &amp; tracked_signal);
<span class="type">slot &amp;</span> <a name="id662091-bb"></a>track(<span class="bold"><strong>const</strong></span> <a class="link" href="slot_base.html" title="Class slot_base">signals2::slot_base</a> &amp; tracked_slot);</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">Effects:</span></p></td>
<td>
<p>
                Adds object(s) to the slot's tracked object list.  Should any of the
                tracked objects expire, then subsequent attempts to call the slot's <code class="computeroutput">operator()</code>
                or <code class="computeroutput">lock()</code> methods will throw an <a class="link" href="expired_slot.html" title="Class expired_slot">signals2::expired_slot</a> exception.
              </p>
<p>When tracking a signal, a shared_ptr
                internal to the signal class is used for tracking.  The signal does not
                need to be owned by an external <code class="computeroutput">shared_ptr</code>.
              </p>
<p>
                In the case of passing another slot as the argument to <code class="computeroutput">track()</code>,
                only the objects currently in the other slot's tracked object list are added
                to the tracked object list of <code class="computeroutput">this</code>.  The other slot object itself
                is not tracked.
              </p>
</td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p><code class="computeroutput">*this</code></p></td>
</tr>
</tbody>
</table></div>
</li></ol></div>
</div>
<div class="refsect2" title="slot slot function access">
<a name="id1754362"></a><h3>
<a name="id668592-bb"></a><code class="computeroutput">slot</code> slot function access</h3>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<pre class="literallayout"><a name="id668596-bb"></a><span class="type">slot_function_type &amp;</span> <a name="id668600-bb"></a>slot_function();
<span class="type"><span class="bold"><strong>const</strong></span> slot_function_type &amp;</span> <a name="id633921-bb"></a>slot_function() <span class="bold"><strong>const</strong></span>;</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>A reference to the slot's underlying SlotFunction object.</p></td>
</tr></tbody>
</table></div>
</li></ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2001-2004 Douglas Gregor<br>Copyright &#169; 2007-2009 Frank Mori Hess<p>Distributed under the Boost
    Software License, Version 1.0. (See accompanying file
    <code class="filename">LICENSE_1_0.txt</code> or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)</p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="signal_type.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../signals2/reference.html#header.boost.signals2.slot_hpp"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="slot/arg.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
